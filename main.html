<html charset="UTF-8">
    <head>
        <link rel="stylesheet" href="css.css">
        <title>KRYZYSOWE</title>
    </head>
    <body>
     <div id="bingo-container"></div> 
     <div id="centered">
     <button id="refresh-btn">OdÅ›wieÅ¼ PlanszÄ™</button>
     </div>  
     <div id="win-modal">
       
    </div>
         <script>
        const textOptions = [
            '*Cisza*', 'Jedzenie kanapki', '"PrzeczytaliÅ›cie tekst na dzisiaj?"', 'Kryzys odczuwany w duszy', 'Kapitalizm',
            '3 spÃ³Åºnionych muszkieterÃ³w', 'Sebastian nie dotrwaÅ‚ do koÅ„ca', 'KaliÅ›ciak skanuje 4 rzÄ…d', '"Znowu brzydka pogoda siÄ™ trafiÅ‚Ä…"', '"A badania naukowe ðŸ¤“â˜ï¸"',
            '"Co myÅ›licie?"', 'Mrozi w sali', '"To by byÅ‚o chyba na tyle"', 'SprzÄ™t w sali nie dziaÅ‚a', 'Teksty do przeczytania na zajÄ™cia',
            '"Jak siÄ™ z tym czujecie"', 'Ameryka mentioned', 'Pytania z dupy', '"Czy ktoÅ› jeszcze chce coÅ› powiedzieÄ‡?', '"BÄ™dziemy dzisiaj w okrojonym skÅ‚adzie?"',
            'KaliÅ›ciak siÄ™ spÃ³Åºnia', 'Pytania o eseje', 'Palestyna mentioned', 'Feminizm mentioned', '"Czy to tak jest?"',
            'PeÅ‚ny skÅ‚ad prowadzÄ…cych', 'Kolonializm', 'Sebastian mÃ³wi coÅ› mÄ…drego i od razu wychodzi', 'Dawidek wydaje jakieÅ› dziwne dÅºwiÄ™ki', 'KaliÅ›ciak: â€žznacie paÅ„stwo ten teorie/ksiazkeâ€', 
            'Agnieszka zna wspomnianÄ… teorie/ksiazke', 'â€žnikt nie zna teori/ksiazkiâ€', "Afryka mentioned", 
        ];
        // ============================================================

       const container = document.getElementById('bingo-container');
        const refreshBtn = document.getElementById('refresh-btn');
        let gameActive = true; 

        function shuffleArray(array) {
            let shuffled = array.slice(); 
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        const winningCombinations = [
            [0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14], [15, 16, 17, 18, 19], [20, 21, 22, 23, 24], // Poziomo
            [0, 5, 10, 15, 20], [1, 6, 11, 16, 21], [2, 7, 12, 17, 22], [3, 8, 13, 18, 23], [4, 9, 14, 19, 24], // Pionowo
            [0, 6, 12, 18, 24], [4, 8, 12, 16, 20] // Skosy
        ];

        function checkForWin() {
            if (!gameActive) return;

            const cells = document.querySelectorAll('.bingo-cell');
            let hasWon = false;

            for (let combination of winningCombinations) {
                const isLineComplete = combination.every(index => 
                    cells[index].classList.contains('selected')
                );

                if (isLineComplete) {
                    hasWon = true;
                    combination.forEach(index => cells[index].classList.add('winner-line'));
                }
            }

            if (hasWon) {
                gameActive = false;
                
                // UÅ¼ywamy setTimeout, aby przeglÄ…darka zdÄ…Å¼yÅ‚a pokolorowaÄ‡ ostatni kafelek
                // zanim wyÅ›wietli okienko, ktÃ³re "zamraÅ¼a" ekran.
                setTimeout(() => {
                    // Systemowe okienko z pytaniem
                    let restart = confirm("BINGO! ðŸŽ‰\nGratulacje, uniknÄ…Å‚eÅ›/Å‚aÅ› kryzysu! A przynajmniej na razie... \n\nKliknij OK, aby wylosowaÄ‡ nowÄ… planszÄ™.\nKliknij Anuluj, aby zostaÄ‡ tutaj.");
                    
                    if (restart) {
                        generateBoard();
                    }
                }, 100); 
            }
        }

        function generateBoard() {
            container.innerHTML = '';
            gameActive = true;

            if (textOptions.length < 25) {
                alert("Potrzebujesz co najmniej 25 tekstÃ³w!");
                return;
            }

            const shuffledOptions = shuffleArray(textOptions).slice(0, 25);

            shuffledOptions.forEach(text => {
                const cell = document.createElement('div');
                cell.classList.add('bingo-cell');
                cell.innerText = text;

                cell.addEventListener('click', () => {
                    cell.classList.toggle('selected');
                    checkForWin();
                });

                container.appendChild(cell);
            });
        }

        refreshBtn.addEventListener('click', generateBoard);
        generateBoard();
    </script>
    </body>

</html>

